{% extends "main/pages/base.html" %}
{% load i18n widget_tweaks tags staticfiles formset_tags debug_tags %}

{% block menu %}{% endblock %}
{% block extra_js %}
	<script src="{% static 'js/jquery.formset.js' %}"></script>
{% endblock %}
{% block content %}
        <div class="templatemo_home_inner_wapper">
            <h1 class="text-center" style="margin: 0.4em 0;">
                <i class="fa fa-car"></i>
                <span style="color:orange">A</span>-ից
                <span style="color:orange">B</span></h1>
        </div>
{% errors_for form %}
	<div class="container">
	    <h3>Լրացուցիչ Տվյալներ</h3>
	</div>
	<form method="post" enctype="multipart/form-data">
			<table>
				{{ form.as_table }}
			</table>
			<h4 id="car-images">Մեքենայի նկարները</h4>
			<div id="formset" data-formset-prefix="{{ formset.prefix }}">
			    {{ formset.management_form }}
			    <div data-formset-body>
			
					{% for form in formset %}
						<div data-formset-form>
							{{ form.id }}
							<div id="image-div" class="col-sm-6">
						        {% if form.instance.image %} 
						        	<img width="100px" src="{{ form.instance.image.url }}">
						        	<div class="hidden">{{ form.DELETE }}</div>
						        	<button type="button" data-formset-delete-button>Ջնջել նկարը</button>
						        {% endif %}
								{{ form.image }}
					        </div>
					    </div>
				    {% endfor %}
				</div>
				<script type="form-template" data-formset-empty-form>
			        {% escapescript %}
			            <div data-formset-form>
			                {{ formset.empty_form.id }}
							<div id="image-div" class="col-sm-6">
						        {{ formset.empty_form.image }}
					        </div>
			            </div>
			        {% endescapescript %}
			    </script>

			    <!-- This button will add a new form when clicked -->
			    
			    <div id="make-hand"><i class="fa fa-plus-circle fa-3x" data-formset-add></i></div>
			    <script>jQuery(function($) {
			        $("#formset").formset({
			            animateForms: true,
			            hasMaxFormsClass: true
			        });
			    });
			    </script>

			</div>
		<div class="col-sm-12 text-center">
            <button id="sbmt_btn" type="submit" class="btn btn-primary"><i class="fa fa-save"></i> Save changes
            </button>
        </div>
    </form>

{% endblock %}
