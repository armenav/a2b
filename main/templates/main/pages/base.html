<!DOCTYPE html>
{% load render_table from django_tables2 %}
{% load staticfiles widget_tweaks get_form %}
<html lang="en" class="ie_11_scroll">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="hhhwidth=device-width, initial-scale=1">
    <title>A2B</title>

    <!-- jQuery-->
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/modernizr.custom.min.js' %}"></script>

    {% searchform as searchform %}
    {{ searchform.media }}
    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/templatemo_style.css' %}">
    <!-- Favicon and touch icons -->
    <link rel="shortcut icon" href="{% static 'images/car.ico' %}"/>

    <link rel="stylesheet" href="{% static 'css/style.css' %}"/>
    <link rel="stylesheet" href="{% static 'css/shuffle-styles.css' %}"/>
    <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
</head>

<body>
<!-- Home -->
<section id="templatemo_home">
    <div class="container a2b-background">
        <div class="templatemo_home_inner_wapper btn_wapper">
            <div class="col-sm-12">
                <a href="#templatemo_contact" class="btn col-xs-12 scroll_effect shadow-top-down">
                    <i class="fa fa-heart"></i> Կապվեք Մեզ Հետ
                </a>
            </div>
        </div>


        {% block message %}{% endblock %}
        <div class="templatemo_home_inner_wapper">
            <h1 class="text-center" style="margin: 1em 0;"><i class="fa fa-car"></i> A-ից B</h1>
        </div>
        <div>
            <h2 class="text-center">Մենք ձեզ կՏեղաՓոխենք</h2>
        </div>

        <div class="text-center hide-sm">
            <div id="center-block searchbar">
                <div class="searchbar">
                    <form id="searchbar-form" action="{% url 'ridesearch' %}" method="post">
                        <div>
                            {% csrf_token %}
                            {% for hidden in sform.hidden_fields %}
                                {{ hidden }}
                            {% endfor %}
                            {% if sform.non_field_errors %}
                                {{ sform.non_field_errors }}
                            {% endif %}

                            <div class="searchbar__input-wrapper">

                                {% for field in searchform.visible_fields %}
                                    <label style="vertical-align: top">

                                        {% render_field field class="input-large input-contrast" placeholder=field.label required='required' %}
                                    </label>
                                {% endfor %}
                                <button class="btn btn-primary">Փնտրել</button>
                            </div>
                    </form>
                </div>
            </div>
        </div>

    </div>

    <div class="container-fluid">
        <div class="a2b-ride-table table-responsive">
            {% render_table table %}
        </div>
    </div>


</section>

<section id="how-it-works">
    <div class="container">
        <h2 class="section-title">Ինչպե՞ս է աշխատում</h2>
        <div class="row">
            <p id="how">
                {{ howitworks }}
            </p>
        </div>
    </div>
</section>
<!-- Contact -->
{% block contact %}{% endblock %}
<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-xs-12 footer-copyright">
                <p>Copyright &copy; 2015 <a href="#" target="_parent">A2B</a></p>
            </div>
        </div>
    </div>
</footer>
<script src="{% static 'js/templatemo_scripts.js' %}"></script>
<!-- modal javascript -->
<script>
    $(function () {
        $('#myModal').modal({
            keyboard: true,
            backdrop: "static",
            show: false

        }).on('show.bs.modal', function (event) { //subscribe to show method

            var getIdFromRow = $(event.relatedTarget).closest('img').data('id'); //get the id from tr
            //make your ajax call populate items or what even you need
            $.post( "{% url 'get_car_images' %}", { id: getIdFromRow, csrfmiddlewaretoken : '{{ csrf_token  }}' }, function( data ) {
                var images = data.images, 
                    html = '';
                    
                for(var i in images){ 
                    html += '<img src="'+images[i]+'" width="300px"/>';
                }
                $('h4.modal-title').html(data.name + ' - ' + data.mobile);
                $('.driver-images').html(html);
            });
            
        });
    });
</script>

<!-- Modal -->
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog modal-dialog-wide">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title"></h4>
            </div>
            <div class="modal-body">
                <div class="driver-images"></div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>
</body>
</html>