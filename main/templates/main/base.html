<!DOCTYPE html>
{% load staticfiles widget_tweaks get_form %}
<html lang="en" class="ie_11_scroll">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="hhhwidth=device-width, initial-scale=1">
    <title>A2B</title>

    <!-- jQuery-->
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.min.js' %}"></script>
    <script src="{% static 'js/modernizr.custom.min.js' %}"></script>

    {% searchform as searchform %}
    {{ searchform.media }}
    <!-- CSS -->
    <link rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}">
    <link rel="stylesheet" href="{% static 'css/templatemo_style.css' %}">
    <!-- Favicon and touch icons -->
    <link rel="shortcut icon" href="{% static 'images/car.ico' %}"/>

    <link rel="stylesheet" href="{% static 'css/style.css' %}"/>
    <link rel="stylesheet" href="{% static 'css/shuffle-styles.css' %}"/>
    <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
          <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
        <![endif]-->
</head>

<body>
<!-- Home -->
<section id="templatemo_home">
    <div class="container a2b-background">
        <div class="templatemo_home_inner_wapper btn_wapper">
            <div class="col-sm-12">
                <a href="#templatemo_contact" class="btn col-xs-12 scroll_effect shadow-top-down">
                    <i class="fa fa-heart"></i> Կապվեք Մեզ Հետ
                </a>
            </div>
        </div>


        {% block message %}{% endblock %}
        <div class="templatemo_home_inner_wapper">
            <h1 class="text-center" style="margin: 1em 0;"><i class="fa fa-car"></i> A-ից B</h1>
        </div>
        <div>
            <h2 class="text-center">Մենք ձեզ կՏեղաՓոխենք</h2>
        </div>

        <div class="text-center hide-sm">
            <div id="center-block searchbar">
                <div class="searchbar">
                    <form id="searchbar-form" action="{% url 'ridesearch' %}" method="post">
                        <div>
                            {% csrf_token %}
                            {% for hidden in sform.hidden_fields %}
                                {{ hidden }}
                            {% endfor %}
                            {% if sform.non_field_errors %}
                                {{ sform.non_field_errors }}
                            {% endif %}

                            <div class="searchbar__input-wrapper">

                                {% for field in searchform.visible_fields %}
                                    <label style="vertical-align: top">

                                        {% render_field field class="input-large input-contrast" placeholder=field.label required='required' %}
                                    </label>
                                {% endfor %}

                            </div>
                    </form>
                </div>
            </div>
        </div>

    </div>

    <div class="container-fluid">
        <div class="a2b-ride-table table-responsive">
            <table class="table table-hover">
                <thead>
                <tr>
                    <th>
                        Որտեղից
                    </th>
                    <th>
                        Ուր
                    </th>
                    <th>
                        Երբ
                    </th>
                    <th>
                        Ի՞նչ արժի
                    </th>
                    <th>
                        Վարորդ
                    </th>
                </tr>
                </thead>
                <tbody id="fbody">
                {% for driver in drivers %}
                    {% for ride in driver.rides.all %}
                        <tr data-id="{{ driver.id }}" data-toggle="modal" data-target="#myModal">
                            <td>
                                {{ ride.fromwhere }}
                            </td>
                            <td>
                                {{ ride.towhere }}
                            </td>
                            <td>
                                {{ ride.leavedate }}
                            </td>
                            <td>
                                {{ ride.howmuch }}
                            </td>
                            <td>
                                {{ driver.title }}
                                <img src="{{ MEDIA_URL }}{{ driver.featured_image }}"/>
                            </td>
                        </tr>
                    {% endfor %}
                {% endfor %}
                <tbody>
            </table>
        </div>
    </div>


</section>

<!-- Contact -->
{% block contact %}{% endblock %}
<!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-xs-12 footer-copyright">
                <p>Copyright &copy; 2015 <a href="#" target="_parent">A2B</a></p>
            </div>
        </div>
    </div>
</footer>
<script type='text/javascript' src="https://cdnjs.cloudflare.com/ajax/libs/Shuffle/3.1.1/jquery.shuffle.min.js"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/0.0.1/prism.min.js"></script>


<script src="{% static 'js/page.js' %}"></script>
<script src="{% static 'js/evenheights.js' %}"></script>


<script src="{% static 'js/homepage.js' %}"></script>
<script src="{% static 'js/jquery-ui.min.js' %}"></script>

<script src="{% static 'js/parallax.min.js' %}"></script>
<!-- template script -->
<script src="{% static 'js/templatemo_scripts.js' %}"></script>
<!-- modal javascript -->
<script>
    $(function () {
        $('#myModal').modal({
            keyboard: true,
            backdrop: "static",
            show: false

        }).on('show.bs.modal', function (event) { //subscribe to show method

            var getIdFromRow = $(event.relatedTarget).closest('tr').data('id'); //get the id from tr
            console.log(getIdFromRow);
            //make your ajax call populate items or what even you need

            $(this).find('#myModal').html($('<b> Order Id selected: ' + getIdFromRow + '</b>'))
        });
    });
</script>

<!-- Modal -->
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Anun Azganun - heraxos</h4>
            </div>
            <div class="modal-body">
                <p>Nkarner</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>

    </div>
</div>
</body>
</html>